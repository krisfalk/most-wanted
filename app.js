var dataObject = {
	"272822514" : {
	  "firstName": "Billy",
	  "lastName": "Bob",
	  "gender": "male",
	  "dob": "1/18/1949",
	  "height": 71,
	  "weight": 175,
	  "eyeColor": "brown",
	  "occupation": "programmer",
	  "parents": [],
	  "currentSpouse": 401222887
	},
	"401222887" : {
	  "firstName": "Uma",
	  "lastName": "Bob",
	  "gender": "female",
	  "dob": "4/1/1947",
	  "height": 65,
	  "weight": 162,
	  "eyeColor": "brown",
	  "occupation": "assistant",
	  "parents": [],
	  "currentSpouse": 272822514
	},
	"409574486" : {
	  "firstName": "Michael",
	  "lastName": "Walkens",
	  "gender": "male",
	  "dob": "5/9/1951",
	  "height": 76,
	  "weight": 250,
	  "eyeColor": "brown",
	  "occupation": "landscaper",
	  "parents": [],
	  "currentSpouse": 260451248
	},
	"260451248" : {
	  "firstName": "Jon",
	  "lastName": "Walkens",
	  "gender": "male",
	  "dob": "9/6/1945",
	  "height": 62,
	  "weight": 115,
	  "eyeColor": "brown",
	  "occupation": "assistant",
	  "parents": [],
	  "currentSpouse": 409574486
	},
	"629807187" : {
	  "firstName": "Jack",
	  "lastName": "Pafoy",
	  "gender": "male",
	  "dob": "3/16/1938",
	  "height": 70,
	  "weight": 207,
	  "eyeColor": "black",
	  "occupation": "nurse",
	  "parents": [],
	  "currentSpouse": 464142841
	},
	"464142841" : {
	  "firstName": "Jen",
	  "lastName": "Pafoy",
	  "gender": "female",
	  "dob": "4/10/1940",
	  "height": 72,
	  "weight": 256,
	  "eyeColor": "black",
	  "occupation": "student",
	  "parents": [],
	  "currentSpouse": 629807187
	},
	"982411429" : {
	  "firstName": "Mister",
	  "lastName": "Potatoo",
	  "gender": "male",
	  "dob": "12/18/1952",
	  "height": 66,
	  "weight": 170,
	  "eyeColor": "hazel",
	  "occupation": "architect",
	  "parents": [],
	  "currentSpouse": 595767575
	},
	"595767575" : {
	  "firstName": "Missuz",
	  "lastName": "Potatoo",
	  "gender": "female",
	  "dob": "10/28/1948",
	  "height": 59,
	  "weight": 137,
	  "eyeColor": "blue",
	  "occupation": "architect",
	  "parents": [],
	  "currentSpouse": 982411429
	},
	"693243224" : {
	  "firstName": "Joy",
	  "lastName": "Madden",
	  "gender": "female",
	  "dob": "4/20/1939",
	  "height": 69,
	  "weight": 199,
	  "eyeColor": "hazel",
	  "occupation": "doctor",
	  "parents": [],
	  "currentSpouse": 693243224
	},
	"888201200" : {
	  "firstName": "Mader",
	  "lastName": "Madden",
	  "gender": "male",
	  "dob": "5/6/1937",
	  "height": 76,
	  "weight": 205,
	  "eyeColor": "black",
	  "occupation": "landscaper",
	  "parents": [],
	  "currentSpouse": 888201200
	},
	"878013758" : {
	  "firstName": "Jill",
	  "lastName": "Pafoy",
	  "gender": "Bob",
	  "dob": "2/8/1972",
	  "height": 74,
	  "weight": 118,
	  "eyeColor": "brown",
	  "occupation": "programmer",
	  "parents": [401222887,401222887],
	  "currentSpouse": 294874671
	},
	"951747547" : {
	  "firstName": "Ralph",
	  "lastName": "Bob",
	  "gender": "male",
	  "dob": "12/23/1969",
	  "height": 66,
	  "weight": 179,
	  "eyeColor": "blue",
	  "occupation": "nurse",
	  "parents": [401222887,401222887],
	  "currentSpouse": 159819275
	},
	"159819275" : {
	  "firstName": "Jasmine",
	  "lastName": "Bob",
	  "gender": "female",
	  "dob": "12/18/1969",
	  "height": 58,
	  "weight": 156,
	  "eyeColor": "blue",
	  "occupation": "assistant",
	  "parents": [409574486,260451248],
	  "currentSpouse": 951747547
	},
	"348457184" : {
	  "firstName": "Annie",
	  "lastName": "Pafoy",
	  "gender": "female",
	  "dob": "11/4/1970",
	  "height": 62,
	  "weight": 235,
	  "eyeColor": "hazel",
	  "occupation": "landscaper",
	  "parents": [629807187,464142841],
	  "currentSpouse": null
	},
	"294874671" : {
	  "firstName": "Dave",
	  "lastName": "Pafoy",
	  "gender": "male",
	  "dob": "8/5/1967",
	  "height": 61,
	  "weight": 112,
	  "eyeColor": "green",
	  "occupation": "doctor",
	  "parents": [629807187,464142841],
	  "currentSpouse": 878013758
	},
	"931247228" : {
	  "firstName": "Amii",
	  "lastName": "Pafoy",
	  "gender": "female",
	  "dob": "3/13/1963",
	  "height": 74,
	  "weight": 184,
	  "eyeColor": "brown",
	  "occupation": "landscaper",
	  "parents": [629807187,464142841],
	  "currentSpouse": null
	},
	"822843554" : {
	  "firstName": "Regina",
	  "lastName": "Madden",
	  "gender": "female",
	  "dob": "7/26/1959",
	  "height": 71,
	  "weight": 249,
	  "eyeColor": "brown",
	  "occupation": "nurse",
	  "parents": [693243224, 888201200],
	  "currentSpouse": null
	},
	"819168108" : {
	  "firstName": "Hana",
	  "lastName": "Madden",
	  "gender": "female",
	  "dob": "10/7/1953",
	  "height": 70,
	  "weight": 187,
	  "eyeColor": "brown",
	  "occupation": "politician",
	  "parents": [693243224, 888201200],
	  "currentSpouse": null
	},
	"969837479" : {
	  "firstName": "Eloise",
	  "lastName": "Madden",
	  "gender": "female",
	  "dob": "12/11/1961",
	  "height": 63,
	  "weight": 241,
	  "eyeColor": "brown",
	  "occupation": "assistant",
	  "parents": [693243224, 888201200],
	  "currentSpouse": null
	},
	"313207561" : {
	  "firstName": "Mattias",
	  "lastName": "Madden",
	  "gender": "male",
	  "dob": "2/19/1966",
	  "height": 70,
	  "weight": 110,
	  "eyeColor": "blue",
	  "occupation": "assistant",
	  "parents": [693243224, 888201200],
	  "currentSpouse": 313997561
	},
	"313997561" : {
	  "firstName": "Ellen",
	  "lastName": "Madden",
	  "gender": "female",
	  "dob": "2/19/1970",
	  "height": 67,
	  "weight": 100,
	  "eyeColor": "blue",
	  "occupation": "doctor",
	  "parents": [],
	  "currentSpouse": 313207561
	},
	"313998000" : {
	  "firstName": "Joey",
	  "lastName": "Madden",
	  "gender": "female",
	  "dob": "2/02/1987",
	  "height": 67,
	  "weight": 100,
	  "eyeColor": "blue",
	  "occupation": "doctor",
	  "parents": [313207561,313997561],
	  "currentSpouse": null
	}
};


var people = [];
var personList = [];
changeDataObject();
userInterface();



function userInterface(){
	var result = prompt("What do you want to do? Type one of following to search:\r\n'name'\r\n'descendants'\r\n'next of kin'\r\n'trait'\r\n'traits'\r\n'age'\r\n'age range'\r\n'family'\r\nType 'exit' to end.");
  switch(result){
		case "name":
			var person = promptForName();
			errorCheck(person);
			displayPerson(person, "Match: \r\n");
			break;
		case "descendants":
			var person = promptForName();
			errorCheck(person);
			personList = [];
			getDescendants(person);
			errorCheck(personList);
			displayListOfPersons(personList, "descendants: ");
			break;
		case "trait":
  		var typeSearch = prompt("What trait do you want to search by? type: 'gender, height, weight, eye color, or occupation'");
  		errorCheck(typeSearch);
  		personList = [];
  		if(typeSearch == "eye color"){
  			var input = prompt(typeSearch);
  			searchByTrait("eyeColor", input);
  		}else if(typeSearch == "height"){
  			var heightFT = parseInt(prompt("Enter feet:")) * 12;
				var heightFull = parseInt(prompt("Enter inches:")) + heightFT;
				searchByTrait("height", heightFull)
  		}else{
  			var input = prompt(typeSearch);
  			searchByTrait(typeSearch, input);
  		}
  		errorCheck(personList);
  		displayListOfPersons(personList, "Matches:\r\n");
  		break;
		case "family":
  		personList = [];
  		var person = promptForName();
  		errorCheck(person);
  		getImmediateFamily(person);
  		errorCheck(personList);
  		displayListOfPersons(personList, "Immediate family: ");
  		break;
	}
}

function errorCheck(check){
	try{
  			if(check == undefined || check.length == 0)
  				throw(error);
  		}catch(error){
  			console.log(error.message);
  			console.log('No Data Found!');
  			alert("Error - No Data");
  		}
}

function promptForName(){
	return getPersonByName(prompt("Enter person's first name: "),prompt("Enter person's last name: "));
}

function getPersonByName(firstNameSearch, lastNameSearch){
	for (var i = 0; i < people.length; i++) {
		if(people[i].firstName == firstNameSearch && people[i].lastName == lastNameSearch){
			return people[i];
		}
	}
	return undefined;
}
function displayListOfPersons(listOfPeople, strType){
  		for(var i = 0; i < listOfPeople.length; i++){
  			displayPerson(listOfPeople[i], (strType + (i + 1) + ":\r\n"))
  		}
}
function displayPerson(person, displayString){
  		var buildPerson = "" + displayString;
  		for(var item in person){
  			if(item == "parents"){
  				for (var i = 0; i < person[item].length; i++){
  					buildPerson = buildPerson + item + " " + (i + 1) + ": " + dataObject[person[item][i]].firstName + " " + dataObject[person[item][i]].lastName + "\r\n";
  				}
  			}else if(item == "height"){
  				buildPerson = buildPerson + item + ": " + Math.round(person[item] / 12) + "'" + (person[item] % 12) + "\"" + "\r\n";
  			}else if(item == "currentSpouse"){
  				if(person[item] != null){
  					buildPerson = buildPerson + "Spouse: " + dataObject[person[item]].firstName + " " + dataObject[person[item]].lastName  + "\r\n";
  				}
  			}else if(item == "weight"){
  				buildPerson = buildPerson + item + ": " + person[item] + " lbs." + "\r\n";
  			}else{
  				buildPerson = buildPerson + item + ": " + person[item] + "\r\n";
  			}
  		}
  		alert(buildPerson);
  	}

function Person(id, firstName, lastName, gender, dob, height, weight, eyeColor, occupation, parents, currentSpouse){
	this.id = id;
	this.firstName = firstName;
	this.lastName = lastName;
	this.gender = gender;
	this.dob = dob;
	this.height = height;
	this.weight = weight;
	this.eyeColor = eyeColor;
	this.occupation = occupation;
	this.parents = parents;
	this.currentSpouse = currentSpouse;
}

function changeDataObject(){
	var index = 0;
	for(var key in dataObject){
		people[index] = new Person(key, dataObject[key].firstName, dataObject[key].lastName, dataObject[key].gender, dataObject[key].dob, dataObject[key].height, dataObject[key].weight, dataObject[key].eyeColor, dataObject[key].occupation, dataObject[key].parents, dataObject[key].currentSpouse);
		index++;
	}
}

function getDescendants(person){
	for (var i = 0; i < people.length; i++) {
		if(people[i].parents.length != 0){
			if(people[i].parents[0] == person.id || people[i].parents[1] == person.id)
				if(!containsObject(people[i], personList)){
					personList.push(people[i]);
					getDescendants(people[i]);
				}
		}
	}
}

function containsObject(obj, list) {
    for (var i = 0; i < list.length; i++) {
        if (list[i] === obj) {
            return true;
        }
    }
    return false;
}

function getImmediateFamily(person){
	getParents(person.parents);
	getSiblings(person);
	getSpouse(person);
	getChildren(person);
}
function getParents(listPerson){
  		for (var i = 0; i < people.length; i++) {
				if(people[i].id == listPerson[0] || people[i].id == listPerson[1])
  				personList.push(people[i]);
  		}
}
function getPersonByID(idSearch){
	for (var i = 0; i < people.length; i++) {
		if(people[i].id == idSearch)
		return people[i];
	}
	return undefined;
}
function getSiblings(person){
  		for (var i = 0; i < people.length; i++) {
  			if(people[i].parents[0] == person.parents[0] || people[i].parents[1] == person.parents[1] ||
  				people[i].parents[1] == person.parents[0] || people[i].parents[0] == person.parents[1])
  				if(people[i] != person)
  					personList.push(people[i]);
  		}
}
function getSpouse(person){
	searchByTrait("id", person.currentSpouse);
}
function getChildren(person){
	for (var i = 0; i < people.length; i++) {
		if(people[i].parents.length != 0){
			if(people[i].parents[0] == person.id || people[i].parents[1] == person.id)
				if(!containsObject(people[i], personList)){
					personList.push(people[i]);
				}
		}
	}
}
function searchByTrait(traitType, userInput){
  		for (var i = 0; i < people.length; i++) {
  			if(people[i][traitType] == userInput)
  				personList.push(people[i]);
  		}
  	}
